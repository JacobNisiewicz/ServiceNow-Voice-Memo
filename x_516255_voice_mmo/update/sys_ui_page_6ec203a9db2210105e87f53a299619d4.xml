<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ui_page">
    <sys_ui_page action="INSERT_OR_UPDATE">
        <category>general</category>
        <client_script/>
        <description/>
        <direct>false</direct>
        <endpoint>x_516255_voice_mmo_Voice Memo.do</endpoint>
        <html><![CDATA[<?xml version="1.0" encoding="utf-8" ?>
<j:jelly trim="false" xmlns:j="jelly:core" xmlns:g="glide" xmlns:j2="null" xmlns:g2="null">

<html>
 <body>
<div>
        <h2>Record a Voice Memo</h2>
        <p>
            <button id="startRecord">Start Recording</button>
            <button id="stopRecord" button="disabled">Stop Recording</button>
        </p>    
        <p>
            <audio id="recordedAudio"></audio>
            <a id="audioDownload"></a>
        </p>
</div>
</body>


<script>

(function() {

navigator.mediaDevices.getUserMedia({audio:true})
    .then(stream => {
        rec = new MediaRecorder(stream);
        rec.ondataavailable = e => {
            audioChunks.push(e.data);
            if (rec.state == "inactive"){
        let blob = new Blob(audioChunks,{type:'audio/mpeg'});
        recordedAudio.src = URL.createObjectURL(blob);
        recordedAudio.controls=true;
        recordedAudio.autoplay=true;
        audioDownload.href = recordedAudio.src;
        audioDownload.download = 'Test';
        audioDownload.innerHTML = 'download';
     }
        }
    })
    .catch(e=>console.log(e));

startRecord.onclick = e => {
  startRecord.disabled = true;
  stopRecord.disabled=false;
  audioChunks = [];
  rec.start();
}
stopRecord.onclick = e => {
  startRecord.disabled = false;
  stopRecord.disabled=true;
  rec.stop();
}



})();

</script>
</html>

</j:jelly>

]]></html>
        <name>Voice Memo</name>
        <processing_script/>
        <sys_class_name>sys_ui_page</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2020-08-10 19:50:13</sys_created_on>
        <sys_id>6ec203a9db2210105e87f53a299619d4</sys_id>
        <sys_mod_count>55</sys_mod_count>
        <sys_name>Voice Memo</sys_name>
        <sys_package display_value="Voice Memo" source="x_516255_voice_mmo">dc7e66e1db2210105e87f53a2996199e</sys_package>
        <sys_policy/>
        <sys_scope display_value="Voice Memo">dc7e66e1db2210105e87f53a2996199e</sys_scope>
        <sys_update_name>sys_ui_page_6ec203a9db2210105e87f53a299619d4</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2020-08-13 15:40:14</sys_updated_on>
    </sys_ui_page>
</record_update>
